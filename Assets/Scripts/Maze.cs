using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Maze : MonoBehaviour {

	// public variables
	public GameObject wallsGroup;
	public GameObject wallBlock;
	public GameObject objectGroup;
	public GameObject[] mazeObjects;
	public float centerX = 10;
	public float centerY = 10;
	public float squareSize;
	public float wallWidth; // factor of size

	// private variables
	private int[,] map;
	private float initialX;
	private float initialY;
	private float width;
	private float height;
	private float sizeX;
	private float sizeY;
	private List<Wall> walls = new List<Wall>();
	private List<Node> nodes = new List<Node>();
	private int startNode;


	// Use this for initialization
	void Start () {
		intializeLevel(1);
		width = squareSize * map.GetLength (1);
		height = squareSize * map.GetLength (0);
		initialX = centerX - (width / 2);
		initialY = centerY - (height / 2);
		sizeX = width / (map.GetLength(1));
		sizeY = height / (map.GetLength(0));
		AddWalls();
		AddNodes();
		CreateWalls();
		CreateObject ();
	}


	void CreateWalls(){
		foreach (Wall wall in walls) {
			GameObject newWall = Instantiate(wallBlock, new Vector3 (wall.x, wall.y, -1f), Quaternion.identity, wallsGroup.transform);
			newWall.transform.localScale = new Vector3(wall.width, wall.height, 0f);
		}
	}


	void CreateObject(){
		foreach (Node node in nodes) {
			switch (node.initialObject) {
				case 'K':
					Instantiate(mazeObjects[1], new Vector3 (node.x, node.y, -1f), Quaternion.identity, objectGroup.transform);
					break;
				default:
					Instantiate(mazeObjects[0], new Vector3 (node.x, node.y, -1f), Quaternion.identity, objectGroup.transform);
					break;
			}
		}
	}

	void AddNodes(){
		for(int i=1; i<map.GetLength(0); i=i+2){ // step by 2 because we are skiping the internal walls
			int c = 1;
			for(int j=1; j<map.GetLength(1); j=j+2){ // step by 2 because we are skiping the internal walls
				int r = 1;
				if(map[i,j] != 1) {	// not unbreakeble wall
					if(map[i,j] == 7) { // initial player position
						startNode = nodes.Count;
					}
					char o = ' ';
					switch (map [i, j]) {
						case 44:
							o = 'K';
							break;
						case 10:
							o = 'G';
							break;
						case 3:
							o = 'E';
							break;
						case 6:
							o = 'A';
							break;
						case 33:
							o = 'B';
							break;
						case 29:
							o = 'T';
							break;
						case 7:
							o = 'I';
							break;
					}
					nodes.Add(new Node(c, r, initialX+(j*sizeX), -(initialY+(i*sizeY)),o));
				}
			}
		}
	}

	void ConnectNodes(){
		foreach (Node node in nodes){
			if(map[node.row-1, node.col] != 1) { // not unbreakeable wall 
				node.links[0] = nodes.FindIndex(x => x.col == node.col && x.row == node.row-1);
			}

			int colR = ((node.col) % map.GetLength(1))+1;
			int rowD = ((node.row) % map.GetLength(0))+1;
			int colL = node.col == 1 ? map.GetLength(1) : node.col - 1;
			int rowU = node.row == 1 ? map.GetLength(0) : node.row - 1;

			if(nodes.Exists(x => x.col == colR && x.row == node.row)){
				node.nodeR = nodes.FindIndex(x => x.col == colR && x.row == node.row);
			}
			if(nodes.Exists(x => x.col == colL && x.row == node.row)){
				node.nodeL = nodes.FindIndex(x => x.col == colL && x.row == node.row);
			}
			if(nodes.Exists(x => x.col == node.col && x.row == rowU)){
				node.nodeU = nodes.FindIndex(x => x.col == node.col && x.row == rowU);
			}
			if(nodes.Exists(x => x.col == node.col && x.row == rowD)){
				node.nodeD = nodes.FindIndex(x => x.col == node.col && x.row == rowD);
			}
		}
	}

	void AddWalls(){
		
		// Horizontals walls
		for(int i=0; i<map.GetLength(0); i++){
			bool nextToPath = false;

			// start of the wall
			int j1 = -1; // without wall

			// end of the wall
			int j2 = 0;
			for(int j=0; j<map.GetLength(1); j++){
				if(map[i,j] == 1) { // wall
					if(j1 == -1){
						j1 = j;
					}
					if(!nextToPath) {
						if(i>0){
							if(map[i-1,j] != 1)
								nextToPath = true;
						}
					}
					if(!nextToPath) {
						if(i<map.GetLength(0)-1){
							if(map[i+1,j] != 1)
								nextToPath = true;
						}
					}
				}
				else {	// not wall
					if(j1 != -1) {
						if(j1 < j2 && nextToPath){
							float x = initialX+((j1 + j2) / 2.0f * sizeX);
							walls.Add(new Wall(x,-(initialY+(i*sizeY)),sizeX*(j2-j1)+(sizeY*wallWidth),sizeY*wallWidth));
						}
						j1 = -1;
						nextToPath = false;
					}
				}
				j2 = j;
			}
			if(j1 != -1) {
				if(j1 < j2  && nextToPath){
					float x = initialX+((j1 + j2) / 2.0f * sizeX);
					walls.Add(new Wall(x,-(initialY+(i*sizeY)),sizeX*(j2-j1)+(sizeY*wallWidth),sizeY*wallWidth));
				}
			}
		}

		// verticals
		for(int j=0; j<map.GetLength(1); j++){
			bool nextToPath = false;
			int i1 = -1; // without wall
			int i2 = 0;
			for(int i=0; i<map.GetLength(0); i++){
				if(map[i,j] == 1) { // wall
					if(i1 == -1){
						i1 = i;
					}
					if(!nextToPath) {
						if(j>0){	
							if(map[i,j-1] != 1)
								nextToPath = true;
						}
					}
					if(!nextToPath) {
						if(j<map.GetLength(1)-1){
							if(map[i,j+1] != 1)
								nextToPath = true;
						}
					}
				}
				else {	// not wall
					if(i1 != -1) {
						if(i1 < i2 && nextToPath){
							float y = initialY+((i1 + i2) / 2.0f * sizeY);
							walls.Add(new Wall((initialX+(j*sizeX)),-y,sizeX*wallWidth, sizeY*(i2-i1)+(sizeX*wallWidth)));
						}
						i1 = -1;
						nextToPath = false;
					}
				}
				i2 = i;
			}
			if(i1 != -1) {
				if(i1 < i2  && nextToPath){
					float y = initialY+((i1 + i2) / 2.0f * sizeY);
					walls.Add(new Wall((initialX+(j*sizeX)),-y,sizeX*wallWidth, sizeY*(i2-i1)+(sizeX*wallWidth)));
				}
			}
		}
	}



	void intializeLevel(int level) {
		// 0  = empty path in the maze
		// 1  = unbreakeble walls
		// 3  = path with an enemy
		// 6  = path with ammo
		// 7  = initial play position
		// 10 = path with a golden key
		// 23 = path with a door
		// 29 = path with trap
		// 33 = path with bomb reload
		// 43 = path with a breakeable wall
		// 44 = path with a key
		// 53 = path with a golden door

		// temporaly values
		// 15 = Tu 
		// 48 = Tr


		if (level == 1) {
			int[,] tmpMap = new int[,] {
				{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,53,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
				{1,44,0,0,1,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,3,1,6,0,0,0,0,0,3,1,44,1,10,1},
				{1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1,0,1},
				{1,3,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,1,44,1,0,1,0,1,0,0,0,0,0,0,0,0,3,1,0,1},
				{1,1,1,1,1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1},
				{1,0,1,0,0,15,1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,23,0,1,33,0,3,0,0,0,0,1,0,1},
				{1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,0,1},
				{1,0,1,3,1,0,1,0,1,0,1,44,0,0,1,0,0,0,0,29,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,1,3,1},
				{1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,1,1,23,1,1,1,1,1,43,1,0,1},
				{1,0,0,0,1,0,0,3,1,0,1,0,1,0,0,3,1,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1},
				{1,0,1,0,1,43,1,0,1,23,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1},
				{1,3,1,0,0,0,1,0,0,0,1,29,1,0,0,6,1,0,0,0,0,0,0,0,1,0,1,0,0,0,1,6,0,0,0,0,0,3,1,0,0,0,1},
				{1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,1,1,0,0,0,1,1,1,0,1,0,1,23,1,1,1,1,1,1,1,1,1,0,1,43,1,0,1},
				{1,0,1,0,1,0,0,0,1,0,1,0,1,0,0,3,0,0,0,48,1,0,1,0,1,0,1,0,1,0,0,0,1,33,1,0,0,0,0,0,1,0,1},
				{1,0,1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1},
				{1,0,1,0,1,0,1,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,1,48,1,0,0,0,0,0,1,0,1,3,1},
				{1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1},
				{1,6,1,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,1,6,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,1},
				{1,1,1,0,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,43,1,1,1,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1},
				{1,0,0,0,0,0,1,0,1,0,0,0,1,0,1,0,1,0,1,0,1,3,1,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,1,48,1,0,1},
				{1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1},
				{1,3,1,0,0,0,1,33,1,0,1,0,0,0,1,15,1,0,1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,3,1,0,0,3,0,0,1,0,1},
				{1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,0,1},
				{1,0,1,44,1,0,0,0,0,0,1,0,1,0,1,0,1,0,1,3,1,0,1,0,1,29,1,0,1,0,1,0,1,0,1,33,0,0,0,15,1,0,1},
				{1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,23,1},
				{1,0,1,0,0,6,0,0,1,0,0,0,1,0,0,0,1,6,1,0,0,0,1,0,1,0,1,0,0,0,0,0,1,6,1,0,0,0,0,0,1,0,1},
				{1,0,1,1,1,1,1,0,1,43,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1},
				{1,0,43,0,0,3,0,0,1,0,1,0,0,0,0,3,1,0,1,0,0,0,0,0,0,3,0,0,0,0,0,3,0,0,1,15,0,0,0,0,1,0,1},
				{1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1},
				{1,0,1,44,0,15,0,0,0,3,1,0,0,0,1,0,1,0,1,3,1,33,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,23,1,1,1,1,1,1,1,0,1,1,1,0,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1},
				{1,0,1,0,0,0,0,0,1,0,0,0,1,0,1,0,1,3,1,0,0,29,1,0,43,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,1,0,1},
				{1,0,1,0,1,1,1,0,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1},
				{1,0,1,0,1,15,0,0,1,6,0,0,0,0,1,0,1,0,1,0,0,0,0,15,1,0,1,0,0,0,0,3,0,0,0,0,0,0,0,0,0,29,1},
				{1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1},
				{1,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,1,3,0,0,0,0,0,0,0,15,1,0,1,6,1},
				{1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,0,1},
				{1,0,0,0,1,0,0,0,0,3,0,0,0,0,0,0,1,0,1,0,1,44,1,0,1,0,1,0,1,0,1,33,0,44,0,0,1,0,1,0,1,0,1},
				{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,0,1},
				{1,0,0,0,0,0,0,0,0,0,0,15,0,0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,3,1,0,1,0,1,0,1},
				{1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1},
				{1,0,1,0,0,3,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,1,0,1,0,1,3,1,0,0,0,0,3,0,0,0,0,1,0,1,15,1},
				{1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1},
				{1,0,1,0,0,0,0,0,0,0,0,6,1,0,1,0,1,33,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1},
				{1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1},
				{1,0,0,0,0,0,0,0,0,0,0,0,0,48,1,3,0,0,1,0,1,15,1,0,1,0,1,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,1},
				{1,0,1,1,1,1,1,23,1,1,1,1,1,1,1,1,1,23,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1},
				{1,0,1,0,0,0,1,0,1,0,0,0,0,3,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,1,0,1,0,0,3,1,0,1},
				{1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1},
				{1,0,1,0,1,3,1,0,1,6,1,0,0,0,0,0,0,0,0,0,1,0,1,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1},
				{1,0,1,0,1,0,1,0,0,0,0,0,1,0,1,3,0,0,0,0,0,0,1,0,0,0,0,6,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,0,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1},
				{1,0,1,0,1,0,0,0,0,0,0,29,1,3,1,0,1,0,0,0,0,0,0,15,0,0,0,0,0,0,1,0,1,44,0,0,0,0,0,0,1,0,1},
				{1,0,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1},
				{1,0,1,3,1,0,1,0,0,0,0,0,0,0,1,0,1,6,1,3,0,0,0,0,0,3,0,0,1,0,1,3,0,0,0,0,0,0,0,15,1,0,1},
				{1,0,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1},
				{1,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,0,3,0,0,1,33,0,0,0,0,0,48,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1},
				{1,0,0,0,1,0,43,15,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,0,48,1},
				{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,53,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
				{1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,23,1,1,1,0,1},
				{1,0,1,6,1,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,1,0,1,0,1},
				{1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1},
				{1,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,1,0,0,10,1,0,1,0,0,0,1,0,0,0,1},
				{1,0,1,1,1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,0,1},
				{1,0,0,0,1,0,0,0,1,0,0,0,1,0,1,0,1,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,3,1},
				{1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,0,1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1},
				{1,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,1},
				{1,0,1,0,1,0,1,1,1,1,1,23,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,0,1},
				{1,0,0,0,1,0,0,0,0,3,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,1},
				{1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,0,1},
				{1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,1,3,1,0,0,0,1,0,0,0,1,0,0,0,1,0,1},
				{1,0,1,1,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1,0,1,1,1,0,1},
				{1,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,1,0,1},
				{1,1,1,0,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,0,1},
				{1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,43,0,1,0,0,0,0,0,1,0,0,0,2,0,0,0,0,0,1},
				{1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,1,1,1,1},
				{1,0,1,0,0,0,0,0,1,0,0,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,1,3,1},
				{1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1},
				{1,0,1,0,0,0,1,0,0,0,1,0,1,0,1,0,0,0,1,0,1,3,0,0,0,0,1,0,1,0,1,0,1,0,1,0,0,0,1,0,1,0,1},
				{1,0,1,1,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,2,1,0,1,1,1,0,1,0,1,1,1,0,1,0,1,0,1},
				{1,0,0,0,1,0,0,0,1,0,23,0,43,0,0,0,0,2,1,0,1,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,1,0,1},
				{1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1},
				{1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,29,0,0,0,0,0,0,1,0,0,0,1,0,1,44,1,0,43,0,1},
				{1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,0,1,0,1,0,1,0,1},
				{1,0,0,0,1,29,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0,1},
				{1,1,1,0,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1,43,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1},
				{1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0,0,1},
				{1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,1,1,0,1,0,1},
				{1,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,0,0,0,0,1,6,1,0,1,0,1,0,1,33,1,0,1,0,0,0,0,0,1,0,1},
				{1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1},
				{1,0,0,0,1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,1,3,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1},
				{1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1},
				{1,0,1,3,0,0,0,0,1,0,0,0,1,0,0,0,1,0,1,3,0,0,0,0,1,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1},
				{1,0,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1,1,1,0,1,0,1},
				{1,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,1,0,1,0,1,0,1},
				{1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,0,1},
				{1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,1},
				{1,0,1,1,1,1,1,0,1,0,1,2,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1},
				{1,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1},
				{1,0,1,1,1,0,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,23,1},
				{1,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,2,0,1},
				{1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1},
				{1,0,1,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,1},
				{1,0,1,0,1,1,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,0,1},
				{1,0,1,0,0,0,1,0,0,0,1,3,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1},
				{1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1},
				{1,0,1,0,1,0,1,0,0,44,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,0,3,1},
				{1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,0,1},
				{1,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,1},
				{1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,0,1},
				{1,0,1,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,1},
				{1,0,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,0,1},
				{1,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1},
				{1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1},
				{1,0,1,3,0,6,1,0,0,0,0,0,1,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1},
				{1,0,1,1,1,1,1,0,0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1},
				{1,3,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,53,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
				{1,0,0,0,1,0,0,0,0,29,1,29,0,0,0,0,0,0,1,0,1,0,0,0,1,0,43,0,0,0,1,0,0,3,0,0,0,0,1,0,0,0,1},
				{1,0,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1},
				{1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,3,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,1,0,1,33,1},
				{1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1},
				{1,3,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,1,44,1,0,0,0,0,0,1},
				{1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,43,1,1,1,0,1},
				{1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,1,0,1},
				{1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,0,1},
				{1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,1,3,0,0,0,0,0,0,1},
				{1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1},
				{1,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,1},
				{1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1},
				{1,0,0,0,0,0,1,0,1,0,1,6,1,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0,1},
				{1,0,1,1,1,0,1,0,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,1,1,0,1},
				{1,0,1,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,29,1,0,0,0,1,0,1,0,1,0,0,0,1,0,1},
				{1,0,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,0,1,0,1},
				{1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,6,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,1,0,1},
				{1,0,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1,0,1,0,1,1,1,0,1,0,1,0,1},
				{1,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,3,0,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,1,0,1,0,1},
				{1,0,1,1,1,0,1,1,1,1,1,0,0,1,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1},
				{1,0,0,33,1,0,1,0,0,0,1,0,0,0,1,0,0,0,1,29,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1},
				{1,1,1,1,1,0,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1,0,1},
				{1,0,0,0,0,0,1,0,1,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,1,0,1},
				{1,0,1,1,1,0,1,0,1,1,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,0,1,1,1,0,1},
				{1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,0,44,1,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,1},
				{1,43,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,43,1},
				{1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,3,1,3,0,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0,1},
				{1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,0,1},
				{1,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,1},
				{1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,1,1},
				{1,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,1},
				{1,1,1,1,1,0,1,0,1,0,1,1,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1,0,1},
				{1,0,0,0,0,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0,1,0,1},
				{1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,1,1,0,1,0,1},
				{1,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,23,0,0,0,1,0,1,0,0,0,1,0,1,0,1},
				{1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,0,0,1,0,1,1,1,0,1,0,1,1,1},
				{1,0,1,0,0,0,0,0,1,6,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,1},
				{1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,43,1},
				{1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,0,33,1,0,1,0,1,0,0,0,1,0,1,0,0,6,1,0,1},
				{1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1},
				{1,0,0,0,43,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,1,0,1,0,43,0,1},
				{1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1},
				{1,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,1,0,1,3,0,0,0,0,0,0,1,0,1},
				{1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1},
				{1,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,6,1,0,1},
				{1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,2,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1},
				{1,0,1,0,0,0,0,0,0,0,0,0,1,0,1,29,1,29,2,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,1},
				{1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1},
				{1,0,0,0,1,33,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,44,0,0,1,0,0,0,1,0,0,0,1},
				{1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1},
				{1,0,0,0,0,0,0,0,0,0,1,0,1,29,1,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1},
				{1,0,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,0,1},
				{1,0,0,0,1,6,0,0,0,0,1,3,0,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,33,1,0,1},
				{1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,0,1},
				{1,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,33,1,0,1,0,1,0,0,0,0,0,0,0,1},
				{1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1},
				{1,0,0,0,1,0,0,0,1,0,0,0,1,10,1,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,1},
				{1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1},
				{1,33,0,0,1,0,0,0,0,0,0,0,23,0,1,0,23,0,0,0,1,7,0,0,1,6,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,29,1},
				{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
			};
			map = tmpMap;
		}
	}
} // end fo the class Maze

public class Wall {
	public float x;
	public float y;
	public float width;
	public float height;

	public Wall(float x1, float y1, float w, float h){
		width = w;
		height = h;
		x = x1;
		y = y1;
	}
}

public class Node {
	// coordinates in the original map
	public int col;
	public int row;

	// coordinates in the screen
	public float x;
	public float y;

	public char initialObject;

	// links to others nodes
	// 0 = up, 1 = right, 2 = down, 3 = left
	public int[] links;

	// objects that can block the path between nodes
	// D = door, G = Golden door, W = breakeble wall, P = Player
	public char[] obstacles;

//	public int nodeR;
//	public int nodeL;
//	public int nodeU;
//	public int nodeD;

		public Node(int c, int r, float x1, float y1, char o){
		col = c;
		row = r;
		x = x1;
		y = y1;
		links = new int[] {-1, -1, -1, -1};
		obstacles = new char[] {' ', ' ', ' ', ' '};
//		for (int i = 0; i < 4; i++) {
//			links[i] = -1;
//			obstacles[i] = ' ';
//		}
		initialObject = o;
	}
}
